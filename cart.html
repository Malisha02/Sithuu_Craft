<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="image/favicon2.png" />
    <title>Sithuu_Craft — Cart</title>
    <link rel="stylesheet" href="index.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
  :root {
    --accent: #4f46e5;
    --muted: #6b7280;
    --card: #fff;
    --radius: 12px;
    --max-width: 1100px;
  }
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
    color: #111;
    background: #f7f7fb;
  }
  a {
    color: inherit;
    text-decoration: none;
  }

  /* NAV */
  nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.8rem 1rem;
    border-bottom: 1px solid #eee;
    background: #fff;
    position: sticky;
    top: 0;
    z-index: 50;
  }
  .logo {
    font-weight: 700;
    font-size: 1.1rem;
  }
  .icon-btn {
    position: relative;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.1rem;
    color: #333;
  }
  .cart-badge {
    position: absolute;
    right: -8px;
    top: -6px;
    background: var(--accent);
    color: #fff;
    font-size: 0.75rem;
    padding: 2px 6px;
    border-radius: 999px;
  }

  /* content */
  .container {
    max-width: var(--max-width);
    margin: 1.25rem auto;
    padding: 0 1rem;
  }
  .cart-wrap {
    display: grid;
    grid-template-columns: 1fr 320px;
    gap: 1rem;
    align-items: start;
  }
  @media (max-width: 900px) {
    .cart-wrap {
      grid-template-columns: 1fr;
    }
  }

  /* cart list */
  .cart-list {
    background: #fff;
    border-radius: 12px;
    padding: 1rem;
    box-shadow: 0 8px 30px rgba(2, 6, 23, 0.04);
  }
  .cart-item {
    display: flex;
    gap: 12px;
    padding: 0.6rem 0;
    border-bottom: 1px dashed #eee;
    align-items: center;
    flex-wrap: wrap;
  }
  .cart-item:last-child {
    border-bottom: none;
  }
  .item-thumb {
    width: 84px;
    height: 84px;
    border-radius: 8px;
    overflow: hidden;
    flex-shrink: 0;
  }
  .item-thumb img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .item-meta h4 {
    margin: 0;
    font-size: 1rem;
  }
  .item-meta .meta {
    color: var(--muted);
    font-size: 0.9rem;
  }
  .qty {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-top: 0.45rem;
  }
  .qty input {
    width: 64px;
    padding: 0.35rem;
    border-radius: 8px;
    border: 1px solid #eee;
  }
  .remove {
    background: none;
    border: none;
    color: #d00;
    cursor: pointer;
    font-size: 0.9rem;
  }

  /* summary */
  .summary {
    background: #fff;
    border-radius: 12px;
    padding: 1rem;
    box-shadow: 0 8px 30px rgba(2, 6, 23, 0.04);
    height: fit-content;
  }
  .summary h3 {
    margin: 0 0 1rem 0;
  }
  .summary-row {
    display: flex;
    justify-content: space-between;
    margin: 0.5rem 0;
    color: var(--muted);
  }
  .total {
    font-weight: 800;
    color: #111;
    margin-top: 0.6rem;
    font-size: 1.1rem;
    display: flex;
    justify-content: space-between;
  }
  .checkout-btn {
    background: var(--accent);
    color: #fff;
    border: none;
    padding: 0.7rem 1rem;
    border-radius: 8px;
    font-weight: 700;
    width: 100%;
    cursor: pointer;
  }
  .empty {
    background: #fff;
    padding: 2rem;
    border-radius: 12px;
    text-align: center;
    color: var(--muted);
  }

  footer {
    background: #111827;
    color: #fff;
    padding: 1.6rem 1rem;
    margin-top: 2rem;
    text-align: center;
  }
  .payment-icons {
    display: flex;
    gap: 10px;
    align-items: center;
    justify-content: center;
    margin: 20px 0;
    flex-wrap: wrap;
  }
  .payment-icons a img {
    width: 50px;
    height: auto;
    transition: transform 0.2s ease;
  }
  .payment-icons a img:hover {
    transform: scale(1.1);
  }

  /* --- RESPONSIVE IMPROVEMENTS --- */
  @media (max-width: 768px) {
    nav {
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.5rem;
    }

    .cart-item {
      flex-direction: column;
      align-items: flex-start;
      text-align: left;
      gap: 0.8rem;
    }

    .item-thumb {
      width: 100%;
      height: auto;
      max-height: 200px;
    }

    .item-meta h4 {
      font-size: 1rem;
    }

    .qty input {
      width: 50px;
      padding: 0.3rem;
    }

    .summary {
      order: 2;
    }

    .checkout-btn,
    #clearBtn {
      padding: 0.9rem;
      font-size: 1rem;
    }

    .summary-row span {
      font-size: 0.95rem;
    }
  }

  @media (max-width: 480px) {
    .container {
      padding: 0 0.6rem;
    }

    nav {
      font-size: 0.9rem;
    }

    .cart-item {
      gap: 0.6rem;
    }

    .item-meta h4 {
      font-size: 0.95rem;
    }

    .qty input {
      width: 45px;
      font-size: 0.9rem;
    }

    .checkout-btn {
      font-size: 0.95rem;
    }

    footer {
      font-size: 0.85rem;
    }

    .payment-icons a img {
      width: 40px;
    }
  }
</style>

    </style>
  </head>
  <body>
    <nav>
      <a class="logo" href="index.html">Sithuu_Craft</a>
      <div>
        <a href="cart.html" class="icon-btn">
          <i class="fas fa-shopping-cart"></i>
          <span id="cartCount" class="cart-badge" style="display: none">0</span>
        </a>
      </div>
    </nav>

    <main class="container">
      <div class="cart-wrap">
        <div id="listArea" class="cart-list" aria-live="polite">
          <!-- JS will populate items -->
        </div>

        <aside class="summary" id="summaryArea">
          <h3>Order Summary</h3>
          <div class="summary-row">
            <span>Subtotal</span><span id="subTotal">Rs 0.00</span>
          </div>
          <div class="summary-row">
            <span>Shipping</span><span id="shipping">Rs 500.00</span>
          </div>
          <div class="summary-row">
            <span>Discount</span><span id="discount">- Rs 0.00</span>
          </div>
          <div class="total">
            <span>Total</span><span id="grandTotal">Rs 0.00</span>
          </div>
          <button
            id="checkoutBtn"
            class="checkout-btn"
            style="margin-top: 1rem"
          >
            Checkout
          </button>
          <button
            id="clearBtn"
            style="
              margin-top: 0.6rem;
              background: #fff;
              border: 1px solid #eee;
              padding: 0.6rem 1rem;
              border-radius: 8px;
              cursor: pointer;
              width: 100%;
            "
          >
            Clear Cart
          </button>
        </aside>
      </div>
    </main>

    <footer class="footer">
      <div class="footer-container">
        <div class="footer-column">
          <h3>Sithuu_Craft</h3>
          <p>
            Handcrafted crochet items made with love and care. Bringing warmth
            and style to every stitch.
          </p>
        </div>
        <div class="footer-column">
          <h4>Quick Links</h4>
          <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="shop.html">Shop</a></li>
            <li><a href="aboutus.html">About</a></li>
            <li><a href="#">FAQs</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h4>Support</h4>
          <ul>
            <li><a href="#">Contact</a></li>
            <li><a href="#">Privacy Policy</a></li>
            <li><a href="#">Terms of Service</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h4>Follow Us</h4>
          <div class="socials">
            <a href="#" class="instagram"><i class="fab fa-instagram"></i></a>
            <a href="#" class="facebook"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="whatsapp"><i class="fab fa-whatsapp"></i></a>
            <a href="#" class="tiktok"><i class="fab fa-tiktok"></i></a>
          </div>
        </div>
      </div>
      <div class="payment-icons">
        <a href="#"
          ><img
            src="https://upload.wikimedia.org/wikipedia/commons/4/41/Visa_Logo.png"
            alt="Visa"
        /></a>
        <a href="#"
          ><img
            src="https://upload.wikimedia.org/wikipedia/commons/0/04/Mastercard-logo.png"
            alt="Mastercard"
        /></a>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Sithuu_Craft. All rights reserved.</p>
      </div>
    </footer>

    <script>
      const CART_KEY = "sithuu_cart";
      const USD_TO_LKR = 1;
      const CURRENCY_SYMBOL = "Rs. ";

      function addToCart(product) {
        let cart = [];
        try {
          cart = JSON.parse(localStorage.getItem(CART_KEY)) || [];
        } catch (e) {
          cart = [];
        }

        const existing = cart.findIndex(
          (p) =>
            p.id === product.id &&
            p.size === product.size &&
            p.color === product.color
        );

        if (existing >= 0) {
          cart[existing].qty += product.qty;
        } else {
          cart.push(product);
        }

        localStorage.setItem(CART_KEY, JSON.stringify(cart));
        updateBadge();
        alert("Item added to cart!");
      }

      function readCart() {
        try {
          return JSON.parse(localStorage.getItem(CART_KEY)) || [];
        } catch (e) {
          return [];
        }
      }

      function writeCart(data) {
        localStorage.setItem(CART_KEY, JSON.stringify(data));
        renderCart();
        updateBadge();
      }

      function renderCart() {
        const listArea = document.getElementById("listArea");
        const cart = readCart();
        listArea.innerHTML = "";
        if (!cart.length) {
          listArea.innerHTML =
            '<div class="empty"><strong>Your cart is empty</strong><p style="margin-top:.6rem">Add items from the product page.</p></div>';
          updateSummary();
          return;
        }

        cart.forEach((item, idx) => {
          const priceLKR = item.price * USD_TO_LKR;
          const totalLKR = item.price * item.qty * USD_TO_LKR;

          const node = document.createElement("div");
          node.className = "cart-item";
          node.innerHTML = `
      <div class="item-thumb"><img src="${item.img}" alt=""></div>
      <div style="flex:1">
        <div class="item-meta">
          <h4>${item.title}</h4>
          <div class="meta">Size: ${item.size} • Color: ${item.color}</div>
          <div class="qty">
            <label style="font-size:.9rem;color:#6b7280">Qty</label>
            <input type="number" min="1" value="${
              item.qty
            }" data-idx="${idx}" class="qty-input">
            <button class="remove" data-idx="${idx}">Remove</button>
          </div>
        </div>
      </div>
      <div style="text-align:right;min-width:90px">
        <div style="font-weight:800">${CURRENCY_SYMBOL}${priceLKR.toFixed(
            2
          )}</div>
        <div class="small" style="color:#6b7280">Item total: ${CURRENCY_SYMBOL}${totalLKR.toFixed(
            2
          )}</div>
      </div>
    `;
          listArea.appendChild(node);
        });

        document.querySelectorAll(".qty-input").forEach((inp) => {
          inp.addEventListener("change", (e) => {
            const idx = Number(e.target.dataset.idx);
            let v = Math.max(1, parseInt(e.target.value) || 1);
            const cart = readCart();
            if (cart[idx]) {
              cart[idx].qty = v;
              writeCart(cart);
            }
          });
        });

        document.querySelectorAll(".remove").forEach((btn) => {
          btn.addEventListener("click", (e) => {
            const idx = Number(e.target.dataset.idx);
            const cart = readCart();
            cart.splice(idx, 1);
            writeCart(cart);
          });
        });

        updateSummary();
      }

      function updateSummary() {
        const cart = readCart();
        const subtotalUSD = cart.reduce((s, i) => s + i.price * i.qty, 0);
        const subtotalLKR = subtotalUSD * USD_TO_LKR;

        // ✅ Fixed Shipping Fee — always Rs 500.00
        const shippingLKR = 500.0;

        const discountLKR = 0;
        const totalLKR = subtotalLKR + shippingLKR - discountLKR;

        document.getElementById("subTotal").textContent =
          CURRENCY_SYMBOL + subtotalLKR.toFixed(2);
        document.getElementById("shipping").textContent =
          CURRENCY_SYMBOL + shippingLKR.toFixed(2);
        document.getElementById("discount").textContent =
          "- " + CURRENCY_SYMBOL + discountLKR.toFixed(2);
        document.getElementById("grandTotal").textContent =
          CURRENCY_SYMBOL + totalLKR.toFixed(2);
      }

      function updateBadge() {
        const cart = readCart();
        const count = cart.reduce((s, i) => s + (i.qty || 0), 0);
        const badge = document.getElementById("cartCount");
        if (count > 0) {
          badge.style.display = "inline-block";
          badge.textContent = count;
        } else badge.style.display = "none";
      }

      document.getElementById("checkoutBtn").addEventListener("click", () => {
        const cart = readCart();
        if (!cart.length) {
          alert("Your cart is empty.");
          return;
        }

        let message = "Hello! 👋 I’d like to order the following items:\n\n";

        cart.forEach((item, i) => {
          const priceLKR = (item.price * USD_TO_LKR).toFixed(2);
          const totalLKR = (item.price * item.qty * USD_TO_LKR).toFixed(2);
          const productLink = `${window.location.origin}/product.html?id=${item.id}`;
          message += `🛍 *${i + 1}. ${item.title}*\n`;
          message += `💰 Price: ${CURRENCY_SYMBOL}${priceLKR}\n`;
          message += `🔢 Quantity: ${item.qty}\n`;
          message += `📏 Size: ${item.size}\n`;
          message += `🎨 Color: ${item.color}\n`;
          message += `🖼 Image: ${item.img}\n`;
          message += `🔗 Product Link: ${productLink}\n`;
          message += `———————————\n\n`;
        });

        const subtotalUSD = cart.reduce((s, i) => s + i.price * i.qty, 0);
        const shippingUSD = subtotalUSD === 0 ? 0 : 500.0;
        const discountUSD = 0;
        const totalUSD = subtotalUSD + shippingUSD - discountUSD;

        const subtotalLKR = subtotalUSD * USD_TO_LKR;
        const shippingLKR = shippingUSD * USD_TO_LKR;
        const discountLKR = discountUSD * USD_TO_LKR;
        const totalLKR = subtotalLKR + shippingLKR - discountLKR;

        message += `💵 *Subtotal:* ${CURRENCY_SYMBOL}${subtotalLKR.toFixed(
          2
        )}\n`;
        message += `🚚 *Shipping:* ${
          shippingLKR === 0 ? "500" : CURRENCY_SYMBOL + shippingLKR.toFixed(2)
        }\n`;
        message += `🎁 *Discount:* ${CURRENCY_SYMBOL}${discountLKR.toFixed(
          2
        )}\n`;
        message += `💳 *Total (with shipping):* ${CURRENCY_SYMBOL}${totalLKR.toFixed(
          2
        )}\n\n`;
        message += `📦 Please confirm my order.`;

        
        const url = `https://wa.me/qr/4WYQ5DT4ZXYGM1?text=${encodeURIComponent(
          message
        )}`;
        window.open(url, "_blank");
      });

      document.getElementById("clearBtn").addEventListener("click", () => {
        if (confirm("Clear the cart?")) {
          localStorage.removeItem(CART_KEY);
          renderCart();
          updateBadge();
        }
      });

      document.addEventListener("DOMContentLoaded", () => {
        renderCart();
        updateBadge();
      });
    </script>
  </body>
</html>

